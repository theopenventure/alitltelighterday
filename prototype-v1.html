<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Boost My Day</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --surface: #FAFAFE;
  --surface-raised: #FFFFFF;
  --text-primary: #1A1A2E;
  --text-secondary: #6B6B80;
  --text-tertiary: #ACACBC;
  --border-subtle: #EDEDF2;

  --energy: #FF6B35;
  --nourish: #2EC4B6;
  --calm: #48BFE3;
  --joy: #9B5DE5;
  --connection: #F472B6;
  --adventure: #F59E0B;

  --energy-bg: rgba(255, 107, 53, 0.08);
  --nourish-bg: rgba(46, 196, 182, 0.08);
  --calm-bg: rgba(72, 191, 227, 0.08);
  --joy-bg: rgba(155, 93, 229, 0.08);

  --energy-bg-hover: rgba(255, 107, 53, 0.14);
  --nourish-bg-hover: rgba(46, 196, 182, 0.14);
  --calm-bg-hover: rgba(72, 191, 227, 0.14);
  --joy-bg-hover: rgba(155, 93, 229, 0.14);

  --radius-card: 20px;
  --radius-button: 14px;
}

html {
  background: var(--surface);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: 'Inter', -apple-system, sans-serif;
  background: var(--surface);
  color: var(--text-primary);
  min-height: 100dvh;
  display: flex;
  justify-content: center;
  overflow-x: hidden;
}

/* ‚îÄ‚îÄ Shell ‚îÄ‚îÄ */
.app-shell {
  width: 100%;
  max-width: 420px;
  padding: 0 24px;
  padding-top: env(safe-area-inset-top, 20px);
  position: relative;
}

/* ‚îÄ‚îÄ Progress bar row ‚îÄ‚îÄ */
.progress-row {
  display: flex;
  gap: 6px;
  padding: 16px 0 0;
  margin-bottom: 36px;
}
.progress-pip {
  flex: 1;
  height: 3px;
  border-radius: 2px;
  background: var(--border-subtle);
  overflow: hidden;
  transition: background 0.6s ease;
}
.progress-pip .fill {
  width: 0%;
  height: 100%;
  border-radius: 2px;
  transition: width 0.8s cubic-bezier(0.22, 1, 0.36, 1);
}
.progress-pip.explored .fill {
  width: 100%;
}

/* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
.greeting {
  margin-bottom: 40px;
  opacity: 0;
  transform: translateY(12px);
  animation: fadeUp 0.7s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards;
}
.greeting h1 {
  font-size: 26px;
  font-weight: 600;
  letter-spacing: -0.3px;
  color: var(--text-primary);
  margin-bottom: 6px;
  line-height: 1.2;
}
.greeting p {
  font-size: 15px;
  color: var(--text-secondary);
  line-height: 1.5;
}

/* ‚îÄ‚îÄ Card Feed ‚îÄ‚îÄ */
.card-feed {
  display: flex;
  flex-direction: column;
  gap: 14px;
  padding-bottom: 60px;
}

/* ‚îÄ‚îÄ Boost Card ‚îÄ‚îÄ */
.boost-card {
  background: var(--surface-raised);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-card);
  padding: 22px 22px 20px;
  cursor: pointer;
  position: relative;
  transition:
    transform 0.45s cubic-bezier(0.22, 1, 0.36, 1),
    box-shadow 0.45s cubic-bezier(0.22, 1, 0.36, 1),
    background 0.45s ease,
    border-color 0.45s ease;
  box-shadow: 0 1px 3px rgba(26, 26, 46, 0.04), 0 4px 12px rgba(26, 26, 46, 0.03);
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  /* staggered entrance */
  opacity: 0;
  transform: translateY(18px);
}
.boost-card.entered {
  opacity: 1;
  transform: translateY(0);
  transition:
    opacity 0.65s cubic-bezier(0.22, 1, 0.36, 1),
    transform 0.65s cubic-bezier(0.22, 1, 0.36, 1),
    box-shadow 0.45s cubic-bezier(0.22, 1, 0.36, 1),
    background 0.45s ease,
    border-color 0.45s ease;
}

.boost-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 2px 6px rgba(26, 26, 46, 0.06), 0 8px 24px rgba(26, 26, 46, 0.06);
}
.boost-card:active {
  transform: translateY(0px) scale(0.99);
  transition-duration: 0.12s;
}

.boost-card.explored {
  opacity: 0.55;
  pointer-events: none;
}
.boost-card.explored::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--radius-card);
  background: var(--surface);
  opacity: 0.3;
  pointer-events: none;
}

/* category-specific tints */
.boost-card[data-cat="energy"] { background: var(--energy-bg); border-color: rgba(255, 107, 53, 0.12); }
.boost-card[data-cat="energy"]:hover { background: var(--energy-bg-hover); }
.boost-card[data-cat="nourish"] { background: var(--nourish-bg); border-color: rgba(46, 196, 182, 0.12); }
.boost-card[data-cat="nourish"]:hover { background: var(--nourish-bg-hover); }
.boost-card[data-cat="calm"] { background: var(--calm-bg); border-color: rgba(72, 191, 227, 0.12); }
.boost-card[data-cat="calm"]:hover { background: var(--calm-bg-hover); }
.boost-card[data-cat="joy"] { background: var(--joy-bg); border-color: rgba(155, 93, 229, 0.12); }
.boost-card[data-cat="joy"]:hover { background: var(--joy-bg-hover); }

.card-emoji {
  font-size: 28px;
  margin-bottom: 12px;
  display: block;
  line-height: 1;
}
.card-label {
  font-size: 10.5px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  margin-bottom: 8px;
  display: block;
}
.boost-card[data-cat="energy"] .card-label { color: var(--energy); }
.boost-card[data-cat="nourish"] .card-label { color: var(--nourish); }
.boost-card[data-cat="calm"] .card-label { color: var(--calm); }
.boost-card[data-cat="joy"] .card-label { color: var(--joy); }

.card-prompt {
  font-size: 17px;
  font-weight: 500;
  line-height: 1.45;
  color: var(--text-primary);
  letter-spacing: -0.15px;
}

/* ‚îÄ‚îÄ Expanded Content Overlay ‚îÄ‚îÄ */
.content-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  justify-content: center;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.35s ease;
}
.content-overlay.active {
  pointer-events: auto;
  opacity: 1;
}

.content-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(250, 250, 254, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.content-panel {
  position: relative;
  width: 100%;
  max-width: 420px;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 0 24px;
  padding-top: env(safe-area-inset-top, 20px);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  transform: translateY(30px);
  transition: transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);
}
.content-overlay.active .content-panel {
  transform: translateY(0);
}

.content-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 0 28px;
}
.content-back {
  display: flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px 12px 8px 6px;
  border-radius: 10px;
  transition: background 0.25s ease, color 0.25s ease;
  -webkit-tap-highlight-color: transparent;
}
.content-back:hover {
  background: rgba(26, 26, 46, 0.04);
  color: var(--text-primary);
}
.content-back svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  fill: none;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.content-category-pill {
  font-size: 10.5px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  padding: 5px 12px;
  border-radius: 20px;
}

.content-body {
  flex: 1;
  padding-bottom: 120px;
}

.content-emoji {
  font-size: 36px;
  margin-bottom: 16px;
  display: block;
  line-height: 1;
}

.content-title {
  font-size: 22px;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.3px;
  color: var(--text-primary);
  margin-bottom: 24px;
}

.content-text {
  font-size: 15.5px;
  line-height: 1.65;
  color: var(--text-secondary);
  letter-spacing: 0.01em;
}
.content-text p {
  margin-bottom: 16px;
}
.content-text strong {
  color: var(--text-primary);
  font-weight: 600;
}
.content-text .song-block {
  background: var(--surface-raised);
  border: 1px solid var(--border-subtle);
  border-radius: 14px;
  padding: 16px 18px;
  margin-bottom: 12px;
}
.content-text .song-title {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 15px;
  margin-bottom: 2px;
}
.content-text .song-artist {
  font-size: 13px;
  color: var(--text-tertiary);
  margin-bottom: 8px;
}
.content-text .song-why {
  font-size: 14px;
  line-height: 1.55;
  color: var(--text-secondary);
}

.content-text .breath-step {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 14px 0;
  border-bottom: 1px solid var(--border-subtle);
}
.content-text .breath-step:last-child {
  border-bottom: none;
}
.content-text .breath-num {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  flex-shrink: 0;
  margin-top: 1px;
}
.content-text .breath-detail {
  flex: 1;
}
.content-text .breath-detail strong {
  display: block;
  font-size: 15px;
  margin-bottom: 2px;
}
.content-text .breath-detail span {
  font-size: 14px;
  color: var(--text-tertiary);
}

.content-text .meal-card {
  background: var(--surface-raised);
  border: 1px solid var(--border-subtle);
  border-radius: 14px;
  padding: 18px 20px;
  margin-bottom: 16px;
}
.content-text .meal-name {
  font-size: 17px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}
.content-text .meal-vibe {
  font-size: 13px;
  color: var(--text-tertiary);
  margin-bottom: 12px;
}
.content-text .meal-desc {
  font-size: 14.5px;
  line-height: 1.6;
  color: var(--text-secondary);
}

.content-text .fact-highlight {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.5;
  margin-bottom: 16px;
  letter-spacing: -0.2px;
}

/* typing cursor */
.typing-cursor {
  display: inline-block;
  width: 2px;
  height: 1em;
  background: var(--text-tertiary);
  margin-left: 2px;
  vertical-align: text-bottom;
  animation: cursorBlink 0.8s ease infinite;
}
@keyframes cursorBlink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* ‚îÄ‚îÄ Reaction Bar ‚îÄ‚îÄ */
.reaction-bar {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  max-width: 420px;
  padding: 16px 24px;
  padding-bottom: calc(16px + env(safe-area-inset-bottom, 12px));
  background: linear-gradient(to top, var(--surface) 60%, transparent);
  z-index: 110;
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 0;
  opacity: 0;
  transform: translateX(-50%) translateY(20px);
  transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
}
.reaction-bar.visible {
  display: flex;
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

.reaction-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.reaction-btn {
  background: var(--surface-raised);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-button);
  padding: 12px 22px;
  font-size: 15px;
  font-family: 'Inter', sans-serif;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 7px;
  transition:
    transform 0.35s cubic-bezier(0.22, 1, 0.36, 1),
    opacity 0.35s ease,
    box-shadow 0.35s ease,
    background 0.25s ease;
  -webkit-tap-highlight-color: transparent;
  box-shadow: 0 1px 4px rgba(26, 26, 46, 0.06);
}
.reaction-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(26, 26, 46, 0.09);
}
.reaction-btn:active {
  transform: scale(0.97);
  transition-duration: 0.1s;
}
.reaction-btn .r-emoji {
  font-size: 18px;
  line-height: 1;
}
.reaction-btn .r-label {
  font-size: 13.5px;
  font-weight: 500;
  color: var(--text-secondary);
}

.reaction-btn.chosen {
  transform: scale(1.08);
  box-shadow: 0 3px 12px rgba(26, 26, 46, 0.1);
}
.reaction-btn.faded {
  opacity: 0.25;
  transform: scale(0.95);
  pointer-events: none;
}

.reaction-confirmation {
  font-size: 13px;
  color: var(--text-tertiary);
  text-align: center;
  padding-top: 12px;
  opacity: 0;
  transform: translateY(6px);
  transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
}
.reaction-confirmation.show {
  opacity: 1;
  transform: translateY(0);
}

/* ‚îÄ‚îÄ Complete State ‚îÄ‚îÄ */
.complete-state {
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 80px 24px;
  opacity: 0;
  transform: translateY(16px);
  transition: opacity 0.7s ease, transform 0.7s cubic-bezier(0.22, 1, 0.36, 1);
}
.complete-state.active {
  display: flex;
  opacity: 1;
  transform: translateY(0);
}
.complete-emoji {
  font-size: 48px;
  margin-bottom: 20px;
  line-height: 1;
}
.complete-title {
  font-size: 21px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
  letter-spacing: -0.2px;
}
.complete-sub {
  font-size: 15px;
  color: var(--text-tertiary);
  line-height: 1.55;
  max-width: 260px;
}

/* ‚îÄ‚îÄ Keyframes ‚îÄ‚îÄ */
@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* subtle ambient gradient on surface */
body::before {
  content: '';
  position: fixed;
  top: -30%;
  left: -20%;
  width: 140%;
  height: 80%;
  background: radial-gradient(ellipse at 30% 20%, rgba(255, 107, 53, 0.03) 0%, transparent 60%),
              radial-gradient(ellipse at 70% 40%, rgba(155, 93, 229, 0.025) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

.app-shell { position: relative; z-index: 1; }

/* ‚îÄ‚îÄ Scroll ‚îÄ‚îÄ */
::-webkit-scrollbar { display: none; }
* { scrollbar-width: none; }

/* Category-specific content panel tints */
.content-panel[data-cat="energy"] .content-category-pill { background: var(--energy-bg); color: var(--energy); }
.content-panel[data-cat="nourish"] .content-category-pill { background: var(--nourish-bg); color: var(--nourish); }
.content-panel[data-cat="calm"] .content-category-pill { background: var(--calm-bg); color: var(--calm); }
.content-panel[data-cat="joy"] .content-category-pill { background: var(--joy-bg); color: var(--joy); }

.content-panel[data-cat="calm"] .breath-num { background: var(--calm-bg); color: var(--calm); }
</style>
</head>
<body>

<div class="app-shell">
  <!-- Progress pips -->
  <div class="progress-row">
    <div class="progress-pip" id="pip-0"><div class="fill" style="background:var(--energy)"></div></div>
    <div class="progress-pip" id="pip-1"><div class="fill" style="background:var(--nourish)"></div></div>
    <div class="progress-pip" id="pip-2"><div class="fill" style="background:var(--calm)"></div></div>
    <div class="progress-pip" id="pip-3"><div class="fill" style="background:var(--joy)"></div></div>
  </div>

  <!-- Greeting -->
  <div class="greeting">
    <h1 id="greeting-text"></h1>
    <p>Here's what today has for you</p>
  </div>

  <!-- Card Feed -->
  <div class="card-feed" id="card-feed">
    <div class="boost-card" data-cat="energy" data-index="0" onclick="openBoost(0)">
      <span class="card-emoji">üî•</span>
      <span class="card-label">Energy &amp; Motivation</span>
      <span class="card-prompt">Curate a three-song playlist to hype me up</span>
    </div>
    <div class="boost-card" data-cat="nourish" data-index="1" onclick="openBoost(1)">
      <span class="card-emoji">üçµ</span>
      <span class="card-label">Nourish</span>
      <span class="card-prompt">Suggest a healthy meal that feels like a treat</span>
    </div>
    <div class="boost-card" data-cat="calm" data-index="2" onclick="openBoost(2)">
      <span class="card-emoji">üåä</span>
      <span class="card-label">Calm &amp; Relief</span>
      <span class="card-prompt">Guide me through a 2-minute breathing reset</span>
    </div>
    <div class="boost-card" data-cat="joy" data-index="3" onclick="openBoost(3)">
      <span class="card-emoji">üíú</span>
      <span class="card-label">Joy &amp; Curiosity</span>
      <span class="card-prompt">Teach me something fascinating in 30 seconds</span>
    </div>
  </div>

  <!-- Complete State -->
  <div class="complete-state" id="complete-state">
    <div class="complete-emoji">‚òÄÔ∏è</div>
    <div class="complete-title">Today's boosts, explored</div>
    <div class="complete-sub">New ones are on the way tomorrow morning. Take the rest of the day gently.</div>
  </div>
</div>

<!-- Content Overlay -->
<div class="content-overlay" id="content-overlay">
  <div class="content-backdrop" onclick="closeBoost()"></div>
  <div class="content-panel" id="content-panel">
    <div class="content-header">
      <button class="content-back" onclick="closeBoost()">
        <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
        Back
      </button>
      <span class="content-category-pill" id="content-cat-pill"></span>
    </div>
    <div class="content-body">
      <span class="content-emoji" id="content-emoji"></span>
      <div class="content-title" id="content-title"></div>
      <div class="content-text" id="content-text"></div>
    </div>
  </div>
</div>

<!-- Reaction Bar -->
<div class="reaction-bar" id="reaction-bar">
  <div class="reaction-buttons">
    <button class="reaction-btn" data-reaction="love" onclick="react('love')">
      <span class="r-emoji">üíõ</span>
      <span class="r-label">Loved it</span>
    </button>
    <button class="reaction-btn" data-reaction="meh" onclick="react('meh')">
      <span class="r-emoji">üòê</span>
      <span class="r-label">Meh</span>
    </button>
    <button class="reaction-btn" data-reaction="skip" onclick="react('skip')">
      <span class="r-emoji">‚è≠Ô∏è</span>
      <span class="r-label">Skip</span>
    </button>
  </div>
  <div class="reaction-confirmation" id="reaction-confirmation">Noted ‚Äî this helps your boosts get better</div>
</div>

<script>
// ‚îÄ‚îÄ Greeting by time of day ‚îÄ‚îÄ
(function setGreeting() {
  const h = new Date().getHours();
  let g = 'Good morning';
  if (h >= 12 && h < 17) g = 'Good afternoon';
  else if (h >= 17 && h < 21) g = 'Good evening';
  else if (h >= 21) g = 'Winding down';
  document.getElementById('greeting-text').textContent = g;
})();

// ‚îÄ‚îÄ Staggered card entrance ‚îÄ‚îÄ
document.querySelectorAll('.boost-card').forEach((card, i) => {
  setTimeout(() => card.classList.add('entered'), 300 + i * 120);
});

// ‚îÄ‚îÄ Boost content data ‚îÄ‚îÄ
const boostContent = [
  {
    cat: 'energy',
    label: 'Energy & Motivation',
    emoji: 'üî•',
    title: 'Your hype playlist for right now',
    segments: [
      { type: 'text', text: 'Three tracks picked to build momentum ‚Äî start gentle, finish electric.' },
      { type: 'song', title: '"On Top of the World"', artist: 'Imagine Dragons', why: 'An opening shot of optimism. The kind of song that makes even a commute feel like a victory lap.' },
      { type: 'song', title: '"Levitating"', artist: 'Dua Lipa', why: 'Pure kinetic energy. This is where your walk picks up pace and you start nodding without meaning to.' },
      { type: 'song', title: '"Lose Yourself"', artist: 'Eminem', why: 'The closer. When you need to remember that you have exactly one shot at today ‚Äî and you\'re about to take it.' },
      { type: 'text', text: 'Hit play on the first one. By the third, you won\'t need convincing.' }
    ]
  },
  {
    cat: 'nourish',
    label: 'Nourish',
    emoji: 'üçµ',
    title: 'A meal that feels like a warm hug',
    segments: [
      { type: 'meal', name: 'Miso-Glazed Salmon Bowl', vibe: 'Comfort meets nourishment ‚Äî 25 minutes, one pan', desc: 'Flaky salmon with a sweet-savory miso glaze, nestled on warm rice with quick-pickled cucumber and a soft-boiled egg. The kind of meal that makes you feel like you have your life together, even if you absolutely don\'t.' },
      { type: 'text', text: '<strong>Why this will feel like a treat:</strong> The miso caramelizes into something almost candy-like under the broiler. The cucumber is cool and crunchy against the warm rice. Every bite has contrast.' },
      { type: 'text', text: '<strong>The secret:</strong> Mix 2 tbsp white miso with 1 tbsp maple syrup and a splash of soy sauce. Brush on salmon. Broil 8 minutes. That\'s it ‚Äî you just made restaurant food at home.' }
    ]
  },
  {
    cat: 'calm',
    label: 'Calm & Relief',
    emoji: 'üåä',
    title: 'A two-minute breathing reset',
    segments: [
      { type: 'text', text: 'Find a comfortable position. You don\'t need to close your eyes, but soften your gaze. This takes four rounds.' },
      { type: 'breath', steps: [
        { label: 'Breathe in slowly', detail: 'Through your nose, 4 counts. Feel your chest expand gently, like a sail catching wind.' },
        { label: 'Hold, gently', detail: 'Keep the air for 4 counts. Not rigid ‚Äî just a soft pause at the top.' },
        { label: 'Release slowly', detail: 'Through your mouth, 6 counts. Longer exhale than inhale. This is where the calm lives.' },
        { label: 'Rest in the gap', detail: '2 counts of stillness before the next breath. Notice the quiet.' }
      ]},
      { type: 'text', text: 'Repeat this four times. By the third round, your shoulders will have dropped an inch. By the fourth, the noise in your head gets a little quieter.' },
      { type: 'text', text: 'You just gave yourself two minutes. That\'s not nothing ‚Äî that\'s everything.' }
    ]
  },
  {
    cat: 'joy',
    label: 'Joy & Curiosity',
    emoji: 'üíú',
    title: 'Something wonderful you didn\'t know',
    segments: [
      { type: 'fact', text: 'Octopuses have three hearts, blue blood, and can taste with their suckers ‚Äî but here\'s the part that\'s genuinely magical:' },
      { type: 'text', text: 'They can <strong>edit their own RNA</strong>. While almost every other animal on Earth relies solely on DNA mutations across generations to adapt, octopuses can modify their genetic instructions on the fly ‚Äî in real time ‚Äî to respond to their environment.' },
      { type: 'text', text: 'Cold water? They\'ll tweak the proteins in their nerve cells to keep signals firing fast. It\'s like being able to rewrite your own manual while you\'re still reading it.' },
      { type: 'text', text: 'Scientists think this might be why octopuses are so remarkably intelligent despite being invertebrates with no bones, no social learning, and a lifespan of only 1‚Äì2 years. They don\'t need generations to evolve ‚Äî they just... update.' },
      { type: 'text', text: 'You\'re now one of the few people who knows that. Feels good, right?' }
    ]
  }
];

// ‚îÄ‚îÄ State ‚îÄ‚îÄ
let currentBoost = null;
let exploredCount = 0;
const explored = [false, false, false, false];
let typingTimeout = null;
let typingTimeouts = [];
let reactionDone = false;

// ‚îÄ‚îÄ Open a boost ‚îÄ‚îÄ
function openBoost(index) {
  if (explored[index]) return;
  currentBoost = index;
  reactionDone = false;
  const data = boostContent[index];
  const overlay = document.getElementById('content-overlay');
  const panel = document.getElementById('content-panel');

  panel.setAttribute('data-cat', data.cat);
  document.getElementById('content-cat-pill').textContent = data.label;
  document.getElementById('content-emoji').textContent = data.emoji;
  document.getElementById('content-title').textContent = data.title;
  document.getElementById('content-text').innerHTML = '<span class="typing-cursor"></span>';

  overlay.classList.add('active');
  document.body.style.overflow = 'hidden';

  // Reset reactions
  document.querySelectorAll('.reaction-btn').forEach(btn => {
    btn.classList.remove('chosen', 'faded');
  });
  document.getElementById('reaction-confirmation').classList.remove('show');

  // Start typing after panel settles
  setTimeout(() => typeContent(data.segments), 500);

  // Show reaction bar after a beat
  setTimeout(() => {
    const bar = document.getElementById('reaction-bar');
    bar.classList.add('visible');
  }, 1200);
}

// ‚îÄ‚îÄ Close boost ‚îÄ‚îÄ
function closeBoost() {
  clearAllTyping();
  const overlay = document.getElementById('content-overlay');
  overlay.classList.remove('active');
  document.body.style.overflow = '';
  document.getElementById('reaction-bar').classList.remove('visible');

  if (currentBoost !== null && reactionDone) {
    markExplored(currentBoost);
  }
  currentBoost = null;
}

// ‚îÄ‚îÄ Type content with segments ‚îÄ‚îÄ
function typeContent(segments) {
  clearAllTyping();
  const container = document.getElementById('content-text');
  container.innerHTML = '';
  let delay = 0;

  segments.forEach((seg, si) => {
    if (seg.type === 'text') {
      delay = scheduleTextSegment(container, seg.text, delay);
    } else if (seg.type === 'song') {
      delay = scheduleSongSegment(container, seg, delay);
    } else if (seg.type === 'meal') {
      delay = scheduleMealSegment(container, seg, delay);
    } else if (seg.type === 'breath') {
      delay = scheduleBreathSegment(container, seg, delay);
    } else if (seg.type === 'fact') {
      delay = scheduleFactSegment(container, seg.text, delay);
    }
    delay += 200; // gap between segments
  });
}

function clearAllTyping() {
  typingTimeouts.forEach(t => clearTimeout(t));
  typingTimeouts = [];
}

function scheduleTextSegment(container, html, startDelay) {
  const p = document.createElement('p');
  p.style.opacity = '0';
  p.style.transform = 'translateY(8px)';
  p.style.transition = 'opacity 0.5s ease, transform 0.5s cubic-bezier(0.22,1,0.36,1)';

  const tid = setTimeout(() => {
    container.appendChild(p);
    p.innerHTML = html;
    requestAnimationFrame(() => {
      p.style.opacity = '1';
      p.style.transform = 'translateY(0)';
    });
  }, startDelay);
  typingTimeouts.push(tid);

  return startDelay + 350;
}

function scheduleSongSegment(container, seg, startDelay) {
  const block = document.createElement('div');
  block.className = 'song-block';
  block.style.opacity = '0';
  block.style.transform = 'translateY(10px)';
  block.style.transition = 'opacity 0.55s ease, transform 0.55s cubic-bezier(0.22,1,0.36,1)';

  const tid = setTimeout(() => {
    block.innerHTML = `
      <div class="song-title">${seg.title}</div>
      <div class="song-artist">${seg.artist}</div>
      <div class="song-why">${seg.why}</div>
    `;
    container.appendChild(block);
    requestAnimationFrame(() => {
      block.style.opacity = '1';
      block.style.transform = 'translateY(0)';
    });
  }, startDelay);
  typingTimeouts.push(tid);

  return startDelay + 450;
}

function scheduleMealSegment(container, seg, startDelay) {
  const card = document.createElement('div');
  card.className = 'meal-card';
  card.style.opacity = '0';
  card.style.transform = 'translateY(10px)';
  card.style.transition = 'opacity 0.55s ease, transform 0.55s cubic-bezier(0.22,1,0.36,1)';

  const tid = setTimeout(() => {
    card.innerHTML = `
      <div class="meal-name">${seg.name}</div>
      <div class="meal-vibe">${seg.vibe}</div>
      <div class="meal-desc">${seg.desc}</div>
    `;
    container.appendChild(card);
    requestAnimationFrame(() => {
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    });
  }, startDelay);
  typingTimeouts.push(tid);

  return startDelay + 500;
}

function scheduleBreathSegment(container, seg, startDelay) {
  let d = startDelay;
  seg.steps.forEach((step, i) => {
    const row = document.createElement('div');
    row.className = 'breath-step';
    row.style.opacity = '0';
    row.style.transform = 'translateY(8px)';
    row.style.transition = 'opacity 0.5s ease, transform 0.5s cubic-bezier(0.22,1,0.36,1)';

    const tid = setTimeout(() => {
      row.innerHTML = `
        <div class="breath-num">${i + 1}</div>
        <div class="breath-detail">
          <strong>${step.label}</strong>
          <span>${step.detail}</span>
        </div>
      `;
      container.appendChild(row);
      requestAnimationFrame(() => {
        row.style.opacity = '1';
        row.style.transform = 'translateY(0)';
      });
    }, d);
    typingTimeouts.push(tid);
    d += 400;
  });
  return d;
}

function scheduleFactSegment(container, text, startDelay) {
  const p = document.createElement('p');
  p.className = 'fact-highlight';
  p.style.opacity = '0';
  p.style.transform = 'translateY(8px)';
  p.style.transition = 'opacity 0.5s ease, transform 0.5s cubic-bezier(0.22,1,0.36,1)';

  const tid = setTimeout(() => {
    p.textContent = text;
    container.appendChild(p);
    requestAnimationFrame(() => {
      p.style.opacity = '1';
      p.style.transform = 'translateY(0)';
    });
  }, startDelay);
  typingTimeouts.push(tid);

  return startDelay + 400;
}

// ‚îÄ‚îÄ Reactions ‚îÄ‚îÄ
function react(type) {
  if (reactionDone) return;
  reactionDone = true;

  document.querySelectorAll('.reaction-btn').forEach(btn => {
    if (btn.dataset.reaction === type) {
      btn.classList.add('chosen');
    } else {
      btn.classList.add('faded');
    }
  });

  setTimeout(() => {
    document.getElementById('reaction-confirmation').classList.add('show');
  }, 300);

  // Auto-close after a moment
  setTimeout(() => {
    closeBoost();
  }, 1800);
}

// ‚îÄ‚îÄ Mark explored ‚îÄ‚îÄ
function markExplored(index) {
  if (explored[index]) return;
  explored[index] = true;
  exploredCount++;

  // Fade the card
  const card = document.querySelectorAll('.boost-card')[index];
  card.classList.add('explored');

  // Fill progress pip
  document.getElementById('pip-' + index).classList.add('explored');

  // Check if all explored
  if (exploredCount === 4) {
    setTimeout(showComplete, 600);
  }
}

// ‚îÄ‚îÄ Complete state ‚îÄ‚îÄ
function showComplete() {
  document.getElementById('card-feed').style.display = 'none';
  const comp = document.getElementById('complete-state');
  comp.style.display = 'flex';
  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      comp.classList.add('active');
    });
  });
}
</script>

</body>
</html>
